<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="Tienda">
        <div>
            <button v-for="categoria in categorias" @click="buscarProductos(categoria)">{{ categoria }}</button>
        </div>
        
        
        <select v-show="!mostrandoDetalles" @change="ordenarProductos($event.target.value)">
            <option value="">Ordenar por...</option>
            <option value="nombreAsc">Nombre (A-Z)</option>
            <option value="nombreDesc">Nombre (Z-A)</option>
            <option value="precioAsc">Precio (Menor a Mayor)</option>
            <option value="precioDesc">Precio (Mayor a Menor)</option>
        </select>
        <div v-show="!mostrandoDetalles" @click="mostrarDetalles(producto.id)" v-for="producto in Productos" class="cardProducto" id="producto">
            <h1>{{producto.title}}</h1>
            <img :src="producto.image" alt="">
            <p>{{producto.price}}</p>
        </div>

        <div>
            <button v-show="mostrandoDetalles" @click="mostrandoDetalles = false">Volver</button>
        </div>
        <div v-show="mostrandoDetalles"class="detallesProducto" id="detallesProducto">

            <h1>{{ProductoDetalles.title}}</h1>
            <img :src="ProductoDetalles.image" alt="">
            <p>{{ProductoDetalles.description}}</p>
            <p>{{ProductoDetalles.price}}</p>

        </div>
    </div>
    
    <script>
        const { createApp } = Vue
    
        createApp({
            data() {
                return {
                    Productos: [],
                    categorias: ["men's clothing", 'jewelery', 'electronics', "women's clothing"],
                    ProductoDetalles: [],
                    mostrandoDetalles: false
                }
            },
            methods: {
                buscarProductos(categoria) {
                    fetch(`https://fakestoreapi.com/products/category/${categoria}`)
                        .then(response => response.json())
                        .then(data => {
                            this.Productos = data;
                        });
                },

                mostrarDetalles(producto) {
                    this.mostrandoDetalles = true;
                    fetch(`https://fakestoreapi.com/products/${producto}`)
                        .then(response => response.json())
                        .then(data => {
                            this.ProductoDetalles = data;
                        });
                },
                ordenarProductos(orden) {
                    if (orden === 'nombreAsc') {
                        this.Productos.sort((a, b) => a.title.localeCompare(b.title));
                    } else if (orden === 'nombreDesc') {
                        this.Productos.sort((a, b) => b.title.localeCompare(a.title));
                    } else if (orden === 'precioAsc') {
                        this.Productos.sort((a, b) => a.price - b.price);
                    } else if (orden === 'precioDesc') {
                        this.Productos.sort((a, b) => b.price - a.price);
                    }
                },

            },
            mounted() {
                this.buscarProductos(this.categorias[0]);
            }
        }).mount('#Tienda')
    </script>
</body>
</html>